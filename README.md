# fly-crud

Sometimes you don't need a database, just some yaml/json/etc files with the data to build the website.

This library provides a simple way to manage data stored in files using [flysystem](http://flysystem.thephpleague.com/) as a filesystem engine.

## Installation

The library is compatible with PHP >= 5.4 and installable and autoloadable via Composer as [fly-crud/fly-crud](https://packagist.org/packages/fly-crud/fly-crud).

```
$ composer require fly-crud/fly-crud
```

## Usage example:

```php

use League\Flysystem\Filesystem;
use League\Flysystem\Adapter\Local;
use FlyCrud\JsonRepository;
use FlyCrud\Document;

//Create filesystem instance
$adapter = new Local('/path/to/files');
$filesystem = new Filesystem($adapter);

//Create a repository to store the data as json
$repo = new JsonRepository($filesystem);

//Create a new document
$document = new Document([
    'title' => 'Title post',
    'intro' => 'This is the new post'
]);

//Get the document id (autogenerated)
$id = $document->getId();

//Change the id
$document->setId('first-post');

//Get/set more data
$document->title = 'The new title post';

//Save the document
$repo->save($document);

//Get the document
$document = $repo->get('first-post');

//Delete it
$repo->delete($document);
```

## Using ArrayAccess interface

The repositories implements the ArrayAccess interface so you can get/set documents using the array syntax:

```php
//Get a document
$document = $repo['first-post'];

//Create or update a document
$repo['new-post'] = [
    'title' => 'Other post',
    'intro' => 'This is the second post'
];

//Check whether a document exists
if (isset($repo['new-post'])) {
    echo 'The post exist';
}

//Delete a document
unset($repo['new-post']);
```
